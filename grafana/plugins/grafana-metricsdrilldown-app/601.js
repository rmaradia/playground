"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[601],{2601:(e,t,r)=>{r.r(t),r.d(t,{sortSeries:()=>v,wasmSupported:()=>g});var n=r(6944),o=r(7781),s=r(3241),a=r(2445),l=r(4964),c=r(3347),i=r(5570);const u=(e,t="asc")=>{const r="asc"===t?(e,t)=>(0,l._)(e,t):(e,t)=>(0,l._)(t,e);return e.sort((e,t)=>{const n=(0,i.H)(e);if(!n)return 0;const o=(0,i.H)(t);return o?r(n,o):0})},f=(e,t,r="asc")=>{const n=o.fieldReducers.get(t),s=e.map(e=>{var r,s;var a;return{value:null!==(a=(null!==(s=null===(r=n.reduce)||void 0===r?void 0:r.call(n,e.fields[1],!0,!0))&&void 0!==s?s:(0,o.doStandardCalcs)(e.fields[1],!0,!0))[t])&&void 0!==a?a:0,dataFrame:e}});return s.sort("asc"===r?(e,t)=>e.value-t.value:(e,t)=>t.value-e.value),s.map(({dataFrame:e})=>e)},p=e=>{const t=(0,o.outerJoinDataFrames)({frames:e});if(!t)throw new Error("Error while joining frames into a single one");const r=t.fields.filter(e=>e.type===o.FieldType.number).map(e=>new Float64Array(e.values.filter(Boolean)));return n.OutlierDetector.dbscan({sensitivity:.9}).preprocess(r).detect()},d=(e,t)=>e.seriesResults[t].isOutlier?-e.seriesResults[t].outlierIntervals.length:0,v=(0,s.memoize)((e,t,r="asc")=>{const n=[...e];if("alphabetical"===t)return u(n,"asc");if("alphabetical-reversed"===t)return u(n,"desc");if("outliers"===t)try{return((e,t="asc")=>{if(!g())throw new Error("WASM not supported");const r=p(e),n=e.map((e,t)=>({value:d(r,t),dataFrame:e}));return n.sort("asc"===t?(e,t)=>e.value-t.value:(e,t)=>t.value-e.value),n.map(({dataFrame:e})=>e)})(n,r)}catch(e){return a.v.error(e,{message:"Error while sorting by outlying series, fallback to stdDev"}),f(n,o.ReducerID.stdDev,r)}return f(n,t,r)},(e,t,r="asc")=>{const n=b(e)?e[0].fields[0].values[0]:0,o=b(e)?e[e.length-1].fields[0].values[e[e.length-1].fields[0].values.length-1]:0;return`${e.length>0?(0,i.H)(e[0]):""}_${e.length>0?(0,i.H)(e[e.length-1]):""}_${n}_${o}_${e.length}_${t}_${r}`});function b(e){return e.length>0&&e[0].fields.length>0&&e[0].fields[0].values.length>0}const g=()=>{const e="object"==typeof WebAssembly;return e||(0,c.z)("wasm_not_supported",{}),e}},3347:(e,t,r)=>{r.d(t,{h:()=>f,z:()=>i});var n=r(8531),o=r(4137),s=r(5176);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}const c="grafana_explore_metrics_";function i(e,t){(0,n.reportInteraction)(`${c}${e}`,l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}({},t),{meta:{appRelease:n.config.apps[o.s_].version,appVersion:s.t}}))}function u(e,t){i("label_filter_changed",{label:e,action:t,cause:"adhoc_filter"})}function f(e,t){e.length===t.length?function(e,t){for(const r of t)for(const t of e)r.key===t.key&&r.value!==t.value&&u(r.key,"changed")}(e,t):e.length<t.length?function(e,t){for(const r of t)e.some(e=>e.key===r.key)||u(r.key,"removed")}(e,t):function(e,t){for(const r of e)!t.some(e=>e.key===r.key)&&u(r.key,"added")}(e,t)}},4964:(e,t,r)=>{r.d(t,{_:()=>n});const n=new Intl.Collator("en",{sensitivity:"base"}).compare},5570:(e,t,r)=>{function n(e){var t;const r=null===(t=e.fields[1])||void 0===t?void 0:t.labels;if(!r)return null;const n=Object.keys(r);return 0===n.length?null:r[n[0]]}r.d(t,{H:()=>n})}}]);
//# sourceMappingURL=601.js.map?_cache=cecb66a9f2572689e018